name: AI Paper Review

# 恢复使用 'push' 触发器，这是您最初的设置
on:
  push:
    paths:
      - '**.tex'
      - '**.md'
      - '**.pdf'

jobs:
  review:
    runs-on: ubuntu-latest

    # 移除所有旧的 job-level 'env:'
    
    steps:
      # 1️⃣ 拉取仓库文件
      - name: Checkout Repository
        uses: actions/checkout@v3

      # ‼️ 移除所有旧的 "Debug" 步骤
      
      # 2️⃣ 调用 Gemini 2.5 Pro 进行 AI 审稿
      - name: Run AI Academic Paper Reviewer
        # 使用教程中的正确版本
        uses: toshi0806/ai-academic-paper-reviewer@v1 
        with:
          # 响应 "REPO is missing" 错误，我们将其添加回来
          REPO: ${{ github.repository }}
          
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          
          # 确保这指向您在 GitHub Secrets 中的 Key
          GEMINI_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
          
          # --- 以下是您的个人设置 ---
          MODEL_CODE: "gemini-2.5-pro"
          LANGUAGE: "Chinese"
          REVIEW_MODE: "ACADEMIC" # 使用教程中的大写
          EXCLUDE_PATHS: "" 
          
          # v1 版本似乎不支持这个，先注释掉
          # USE_SINGLE_COMMENT_REVIEW: true
