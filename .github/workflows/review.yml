name: AI Paper Review

on:
  push:
    paths:
      - '**.tex'
      - '**.md'
      - '**.pdf'
jobs:
  review:
    runs-on: ubuntu-latest
    
    # â¬‡ï¸ â¬‡ï¸ â¬‡ï¸ 
    # å…³é”®ä¿®å¤ï¼šåœ¨ "job" çº§åˆ« (ä¸ "steps:" åŒçº§) è®¾ç½®ç¯å¢ƒå˜é‡
    env:
      REPO: ${{ github.repository }}
    # â¬†ï¸ â¬†ï¸ â¬†ï¸

    steps:
      # 1ï¸âƒ£ æ‹‰å–ä»“åº“æ–‡ä»¶
      - name: Checkout Repository
        uses: actions/checkout@v3

      # 2ï¸âƒ£ è°ƒè¯•æ­¥éª¤ (ç°åœ¨å®ƒåº”è¯¥èƒ½è¯»åˆ°å€¼äº†)
      - name: ğŸ Debug Environment Variables
        run: |
          echo "--- æ£€æŸ¥ REPO ç¯å¢ƒå˜é‡ ---"
          echo "JOB-LEVEL REPO å˜é‡çš„å€¼æ˜¯: [${{ env.REPO }}]"
          echo "--- æ£€æŸ¥ github.repository å˜é‡ ---"
          echo "github.repository çš„å€¼æ˜¯: [${{ github.repository }}]"

      # 3ï¸âƒ£ è°ƒç”¨ Gemini 2.5 Pro è¿›è¡Œ AI å®¡ç¨¿
      - name: Run AI Academic Paper Reviewer
        uses: smkwlab/ai-academic-paper-reviewer@main
        with:
          # ä¿æŒè¿™äº›ä¸å˜
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GEMINI_API_KEY: ${{ secrets.GOOGLE_API_KEY }} 
          MODEL_CODE: "gemini-2.5-pro"
          LANGUAGE: "Chinese"
          REVIEW_MODE: "academic"
          USE_SINGLE_COMMENT_REVIEW: true
          EXCLUDE_PATHS: ""
        # â€¼ï¸ æ³¨æ„ï¼šæˆ‘ä»¬ä¸å†éœ€è¦ step-level env: äº†
        # å› ä¸ºå®ƒä¼šä»ä¸Šé¢çš„ job-level è‡ªåŠ¨ç»§æ‰¿
# jobs:
#   review:
#     runs-on: ubuntu-latest
#     steps:
#       # 1ï¸âƒ£ æ‹‰å–ä»“åº“æ–‡ä»¶
#       - name: Checkout Repository
#         uses: actions/checkout@v3

#       # 2ï¸âƒ£ è°ƒç”¨ Gemini 2.5 Pro è¿›è¡Œ AI å®¡ç¨¿
#       - name: Run AI Academic Paper Reviewer
#         uses: smkwlab/ai-academic-paper-reviewer@main
#         with:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#           REPO: ${{ github.repository }}                   #github.repository æ˜¯ä¸€ä¸ª GitHub Actions çš„æ ‡å‡†å˜é‡ï¼Œå®ƒä¼šè‡ªåŠ¨å¡«å……ä¸º "æ‚¨çš„ç”¨æˆ·å/æ‚¨çš„ä»“åº“å"
#           GEMINI_API_KEY: ${{ secrets.GOOGLE_API_KEY }}   # ä½ çš„ Gemini 2.5 Pro Key
          
#           MODEL_CODE: "gemini-2.5-pro"                     # ä½¿ç”¨ Gemini 2.5 Pro
#           LANGUAGE: "Chinese"                              # å®¡ç¨¿è¯­è¨€
#           REVIEW_MODE: "academic"                          # å®¡ç¨¿æ¨¡å¼ï¼Œå­¦æœ¯æ·±åº¦
#           USE_SINGLE_COMMENT_REVIEW: true                 # åˆå¹¶ä¸ºä¸€æ¡ Comment
#           EXCLUDE_PATHS: ""                                # å¯é€‰ï¼Œæ’é™¤ä¸å®¡æŸ¥çš„æ–‡ä»¶
#         env:
#           # â¬‡ï¸ æŠŠå®ƒæ·»åŠ åˆ° 'env:' (ç¯å¢ƒå˜é‡) éƒ¨åˆ†
#           REPO: ${{ github.repository }}
